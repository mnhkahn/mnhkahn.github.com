---
layout: post
title: "北京地铁视频播放原理猜想"
description: "今天回家路上坐地铁的新发现。"
category: "Kaleidoscope"
tags: ["Kaleidoscope"]
---
 
今天晚上乘坐8号线回家，一路都在地铁里面那个电视，当时正在播放那个《非常静距离》。看着看着，发现出bug了，屏幕最下面露出来了任务栏，赫然写着vlc播放器。嗯，用开源的，不错。此外，还能发现这东西用的是Windows系统，看着像Windows XP或者之前的系统。

VLC播放器处于任务栏选中状态，说明视频的内容最起码车厢内的客户端是VLC。如果是用VLC作为客户端，那说明它就是在播放视频。VLC播放的视频不应该是本地视频，这样的话太low了，并且很难管理报站。VLC支持RTSP、RTP等协议，能够播放远程流媒体信息，具体操作可以参考我之前的[文章](http://blog.cyeam.com/postgraduate/2014/04/17/pager_prepare/#vlc)。

![IMG-THUMBNAIL](https://res.cloudinary.com/cyeam/image/upload/v1537933530/cyeam/5535219cjw1e4r3skxc9uj20qo0zk417.jpg)

那么这个流媒体的服务器端在哪里呢？视频一般包含了到站信息、日期和时间等。知道当前是哪一站的是列车本身和控制台。我个人认为数据应该是控制台发送的，因为有时候会出现丢帧、卡顿的现象，并且是视频内容和到站信息都卡（据我观察是这样）。那么，说明数据应该都是远程传输过来的。列车内部传输的话应该都是有线传输，不应该出现那么严重卡顿。

所以大体流程是这样：控制台能监控到列车运行情况，并结合一些视频资源，动态拼接出当前列车的视频内容。通过一定的流媒体技术进行传输。这样，能够解耦合，列车长开车的时候不需要管这些有的没的，视频内容也不需要在修改的时候每辆车都去更新。

意淫结束了。
 
---

###### *参考文献*

 
{% include JB/setup %}