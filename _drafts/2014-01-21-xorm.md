---
layout: post
title: "xorm介绍"
figure: "http://cyeam.qiniudn.com/cache_design.png"
description: "基于golang的ORM框架xorm"
category: "Kaleidoscope"
tags: ["golang", "orm"]
---

###[xorm]
	https://github.com/lunny/xorm

###配置
#####1. MySql驱动
	https://github.com/Go-SQL-Driver/MySQL

###xorm
+ 初始化xorm

		var (
			engine *xorm.Engine
		)
		
		func init() {
			_, err := SetEngine()
			if err != nil {
				fmt.Println(err)
			}
		}
		
		func XConDb() (*xorm.Engine, error) {
			return xorm.NewEngine(beego.AppConfig.String("db"), beego.AppConfig.String("url"))
		}
		
		func SetEngine() (*xorm.Engine, error) {
			var err error
			engine, err = XConDb()
			engine.SetMaxConns(5)
			engine.ShowSQL = true
		
			cacher := xorm.NewLRUCacher(xorm.NewMemoryStore(), 1000)
			engine.SetDefaultCacher(cacher)
		
			return engine, err
		}
+ 关联数据库

	名称映射规则主要负责结构体名称到表名和结构体field到表字段的名称映射。由xorm.IMapper接口的实现者来管理，xorm内置了两种IMapper实现：SnakeMapper 和 SameMapper。SnakeMapper支持struct为驼峰式命名，表结构为下划线命名之间的转换；SameMapper支持相同的命名。当前SnakeMapper为默认值
+ 字段不映射

		xorm:"-"
+ Find

	Fetch multipe objects into a slice or a map

		err := engine.In("id", ids...).Find(&deals)

###xorm tool
	xorm reverse mysql test_user:KSMFJeusjdweq454@tcp(116.255.143.155:3306)/tao800 models/
